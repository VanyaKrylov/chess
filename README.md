# Шахматы
##Задание
Создание шахматного поля с возможностью перемещать фигуры в соответствии с правилами, предусмотренными игрой

Реализация игры шахматы с графическим интерфейсом и предусмотренным искусственным интелектом. Возможность изменять начальные параметры игры.
##Концепция
Реализация игры шахматы: графическое представление поля, фигур, возможность перемещать шахматные фигуры по полю в соответствии с правилами, предусмотренными игрой. Несколько режимов игры на выбор: игра со вторым пользователем и игра с искуственным интелектом. Реализация искуственного интелекта на уровне случайных неанализируемых ходов, не противоречащим правилам игры, и на уровне анализируещего механизма, целью которого является нахождение наиболее выгодной стратегии для победы. Возможность изменять предустановки игры: выбор цвета фигур, опциональная возможность играть с/без счётчика времени. Тем самым пользователю предоставляется виртуальная реализация настольной игры шахматы с возможностью выбрать себе опонентом второго игрока или искуственный интелект.
## Правила игры
### Доска и начальная позиция
Игра происходит на доске, поделенной на равные квадратные клетки, или поля. Размер доски — 8×8 клеток. Вертикальные ряды полей (вертикали) обозначаются латинскими буквами от а до h слева направо, горизонтальные ряды (горизонтали) — цифрами от 1 до 8 снизу вверх; каждое поле обозначается сочетанием соответствующих буквы и цифры. Поля раскрашены в тёмный и светлый цвета (и называются, соответственно, чёрными и белыми) так, что соседние по вертикали и горизонтали поля раскрашены в разные цвета. Доска располагается так, чтобы ближнее угловое поле справа от игрока было белым (для белых это поле h1, для черных — поле а8).
У игроков в начале игры имеется по одинаковому набору фигур. Фигуры одного из игроков условно называются «белыми», другого — «чёрными». Белые фигуры окрашены в светлый цвет, чёрные в тёмный. Сами игроки называются «белые» и «чёрные» по цвету своих фигур.В каждый комплект фигур входят: король (♔, ♚), ферзь (♕, ♛), две ладьи (♖, ♜), два слона (♗, ♝), два коня (♘, ♞) и восемь пешек (♙, ♟). В начальной позиции фигуры обеих сторон размещаются так, как показано на диаграмме. Белые занимают первую и вторую горизонтали, чёрные — седьмую и восьмую. Пешки расположены на второй и седьмой горизонталях соответственно.
### Ходы
Игра заключается в том, что игроки поочерёдно делают ходы. Первый ход делают белые. За исключением взятия на проходе и рокировки, описанных ниже, ход заключается в том, что игрок перемещает одну из своих фигур на другое поле по следующим правилам:

* Фигуры, кроме коня, во время хода считаются передвигающимися по прямой линии в плоскости доски, то есть «проходящими» все поля между начальным и конечным, поэтому все эти поля должны быть свободны. Если на пути фигуры находится другая фигура, то переместить фигуру на поле за ней невозможно. Исключением является ход коня (см. ниже).
* Ход на поле, занятое своей фигурой, невозможен.
* При ходе на поле, занятое чужой фигурой, она снимается с доски (взятие).
* Король ходит на расстояние 1 по вертикали, горизонтали или диагонали.
* Ферзь ходит на любое расстояние по вертикали, горизонтали или диагонали.
* Ладья ходит на любое расстояние по вертикали или горизонтали.
* Слон ходит на любое расстояние по диагонали.
* Конь ходит на поле, находящееся на расстоянии 2 по вертикали и 1 по горизонтали или 1 по вертикали и 2 по горизонтали от текущего положения. В отличие от всех остальных шахматных фигур, ход коня делается вне плоскости доски, то есть конь непосредственно перемещается («перепрыгивает») с начального поля на конечное и никакие фигуры, стоящие на других полях, ходу коня помешать не могут. В частности, конь может ходить на поле, даже если оно полностью окружено своими или чужими фигурами.
* Пешка ходит со взятием по диагонали на одно поле вперёд-вправо или вперёд-влево, а без взятия — по вертикали на одно поле вперёд. Если пешка в данной партии ещё не делала ходов, она может сделать ход без взятия на два поля вперёд. Направлением «вперёд» называется направление к восьмой горизонтали для белых или к первой для чёрных. Когда пешка ходит на последнюю горизонталь (для белых — на восьмую, для чёрных — на первую), ходящий должен заменить её на любую другую фигуру того же цвета, кроме короля (превращение пешки). Превращение пешки является частью того хода, которым она перемещается на последнюю горизонталь. Таким образом, если, например, превращённая из пешки фигура угрожает королю противника, то этот король в результате хода пешкой на последнюю горизонталь немедленно оказывается под шахом.
Кроме того, есть два специальных хода:

* Рокировка — если король и одна из ладей того же цвета не двигались с начала игры, то король и эта ладья могут в один ход одновременно сменить положение (рокироваться). При рокировке король сдвигается на 2 клетки по направлению к ладье, а ладья ставится на поле между начальной и конечной позицией короля. Рокировка невозможна, если король или соответствующая ладья уже ходили. Рокировка временно невозможна, если поле, на котором стоит король, или поле, которое он должен пересечь, или поле, которое он должен занять, находится под ударом одной из фигур противника, или если между рокируемыми королём и ладьёй находится какая-либо фигура. Рокировка считается ходом короля, а не ладьи, поэтому рокировку следует начинать с перестановки короля, а не ладьи.
* Взятие на проходе — когда пешка совершает ход на две клетки через битое поле, находящееся под ударом пешки противника, то ответным ходом она может быть взята этой пешкой противника. При этом пешка противника перемещается на битое поле, а сбитая пешка снимается с доски (пример см. на диаграмме). Взятие на проходе возможно только непосредственно в ответ на ход пешки через битое поле, на следующих ходах оно уже не разрешено.

### Шах, мат и пат

* Король, находящийся на битом поле, называется стоящим под шахом. Сделать ход, после которого король противника оказывается под шахом, значит дать шах королю (или объявить шах). Ходы, после которых король сделавшего ход остаётся или оказывается под шахом, запрещены; игрок, король которого находится под шахом, обязан немедленно его устранить.
* Если король игрока находится под шахом и игрок не имеет ни одного хода, позволяющего устранить этот шах, этот игрок называется получившим мат, а его противник поставившим мат. Цель игры и состоит в том, чтобы поставить мат королю противника.
* Если игрок при своей очереди хода не имеет возможности сделать ни одного хода по правилам, но король игрока не находится под шахом, такая ситуация называется пат.

### Итог игры
Игра завершается выигрышем одной из сторон или ничьей.

Выигрыш фиксируется в следующих случаях:

* Мат. Игрок, поставивший мат, выигрывает.
* Один из игроков сдался. Игрок, решивший, что дальнейшее сопротивление бессмысленно, может сдаться в любой момент, для этого ему достаточно объявить вслух «сдаюсь» (или же остановить шахматные часы). Его противник объявляется победителем.
* Один из игроков просрочил время. Его противник объявляется победителем, за некоторыми исключениями, описанными в разделе «Контроль времени».
* Техническая победа — присуждается в официальном турнире игроку, если его противник:
 - не явился на партию в течение определённого правилами турнира времени (один час, если иное не определено);
 - прервал партию (начал партию, но отказался её продолжать);
 - грубо нарушил правила или не подчинился судье;
 - сделал 3 запрещённых правилами хода;
 - при игре в блиц (меньше 15 минут на всю партию) сделал запрещённый правилами ход, и противник заметил ошибку до своего ответного хода.
 -также техническая победа может быть присуждена за несыгранную игру в том случае, если игроку в данном туре по какой-либо причине не находится соперника и правила проведения турнира специально оговаривают данный случай (например, если соперник, с которым должна была проводиться партия, выбыл из турнира, либо при нечётном количестве игроков в турнире по швейцарской системе).

Ничья фиксируется в следующих случаях:

* Пат.
* Ни у одной из сторон нет минимально необходимого для мата количества фигур (например, на доске остались только короли и одна лёгкая фигура).
* Троекратное повторение позиции (не обязательно в течение трёх ходов подряд), причём в понятие позиции здесь входит расположение фигур, очерёдность хода и возможные ходы (в том числе право на рокировку и взятие на проходе для каждой стороны). Для фиксации ничьей игрок, заметивший троекратное повторение позиции, должен обратиться к судье; в противном случае игра продолжается. С июля 2014 года партия также считается закончившейся вничью в случае пятикратного повторения одной и той же позиции в течение пяти последовательных ходов обоих игроков, причём заявление игроков для этого не требуется.[7]
*Правило 50 ходов. Обе стороны сделали 50 последних ходов без взятия и без хода пешкой. Как и в случае троекратного повторения позиции, ничья фиксируется только по требованию одного из игроков. В 20 веке это правило многократно изменялось, в него добавляли различные исключения. Сейчас все исключения отменены, и правило 50 ходов действует в любых позициях[8]. С июля 2014 года партия также считается закончившейся вничью (без заявления игроков), если обе стороны сделали 75 ходов без взятия и без хода пешкой.[7]
* Игроки согласились на ничью, то есть один из игроков при своём ходе предложил ничью, другой её принял. Для предложения ничьей достаточно сказать «ничья». Если противник делает ход, не ответив на предложение ничьей, оно считается отвергнутым. С недавних пор на некоторых турнирах применяются так называемые «Софийские правила», ограничивающие возможность соглашения игроков на ничью.
* Один из игроков просрочил время. В некоторых случаях, описанных в разделе «Контроль времени», засчитывается ничья.
* У игрока осталось менее двух минут, но его соперник не пытался выиграть «нормальными средствами», или такой выигрыш невозможен. По требованию игрока, у которого осталось меньше двух минут, судья в таком случае может засчитать ничью. Подробнее об этом см. в разделе «Контроль времени».

## Диаграмма прецедентов
![alt text](https://github.com/VanyaKrylov/chess/blob/master/report/diagramms/useCaseDia.jpg)

## Диаграмма компонентов
![alt text](https://github.com/VanyaKrylov/chess/blob/master/report/diagramms/component_dia.jpg)
